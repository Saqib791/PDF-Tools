<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bartan Duty ‚Äì Multi List</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI}
body{background:linear-gradient(135deg,#f5f7fa,#c3cfe2);padding:20px}
.container{max-width:900px;margin:auto}

header{
    background:linear-gradient(to right,#4facfe,#00f2fe);
    color:#fff;
    padding:20px;
    border-radius:12px;
    display:flex;
    justify-content:space-between;
    align-items:center;
}
.add-btn{font-size:1.4rem;cursor:pointer}

.list-box{
    background:#fff;
    margin-top:20px;
    padding:20px;
    border-radius:12px;
}
.list-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-bottom:2px solid #eee;
    padding-bottom:8px;
}
.actions i{
    margin-left:10px;
    cursor:pointer;
    color:#888;
}
.actions i:hover{color:#000}

.progress{
    height:16px;
    background:#e0e0e0;
    border-radius:10px;
    overflow:hidden;
    margin:12px 0;
}
.progress-bar{
    height:100%;
    background:linear-gradient(to right,#4facfe,#00f2fe);
}

.item{
    display:flex;
    align-items:center;
    padding:10px 0;
    border-bottom:1px solid #eee;
}
.item:last-child{border:none}
.tick{
    width:22px;height:22px;border-radius:50%;
    border:2px solid #999;margin-right:12px;
    display:flex;align-items:center;justify-content:center;
    cursor:pointer;
}
.tick.done{
    background:#4facfe;color:#fff;border-color:#4facfe;
    cursor:not-allowed;
}
.name{flex:1}
.time{
    font-size:.8rem;background:#f2f2f2;
    padding:3px 8px;border-radius:12px;
}

/* modal */
.modal{
    position:fixed;inset:0;
    background:rgba(0,0,0,.45);
    display:none;
    align-items:center;justify-content:center;
}
.modal-box{
    background:#fff;
    padding:20px;
    width:90%;
    max-width:400px;
    border-radius:12px;
}
.modal-box input,textarea{
    width:100%;padding:10px;margin-top:10px;
}
.modal-box button{
    width:100%;margin-top:12px;
    padding:10px;border:none;
    background:#4facfe;color:#fff;
    border-radius:8px;
}
.modal-box .danger{
    background:#ff4d4d;
}
.note{
    font-size:.85rem;
    color:#c00;
    margin-top:6px;
}
</style>
</head>

<body>
<div class="container">

<header>
    <h1>üßº Bartan Duty Lists</h1>
    <i class="fas fa-pencil-alt add-btn" onclick="openCreate()"></i>
</header>

<div id="lists"></div>
</div>

<!-- Create List Modal -->
<div class="modal" id="createModal">
    <div class="modal-box">
        <h3>Create New List</h3>
        <input id="listTitle" placeholder="List Heading">
        <textarea id="listNames" placeholder="Names (comma separated)"></textarea>
        <button onclick="createList()">Create</button>
    </div>
</div>

<!-- Delete Modal -->
<div class="modal" id="deleteModal">
    <div class="modal-box">
        <h3>Delete List</h3>
        <p class="note">
            Type exactly:<br>
            <b>sab ki sahmati se delete hui hay</b>
        </p>
        <input id="confirmText" placeholder="Type confirmation text">
        <button class="danger" onclick="confirmDelete()">Delete List</button>
    </div>
</div>

<script>
let lists = JSON.parse(localStorage.getItem("multiDuty")) || [];
let deleteIndex = null;

const wrap = document.getElementById("lists");

function render(){
    wrap.innerHTML="";
    lists.forEach((l,li)=>{
        let done = l.items.filter(i=>i.done).length;
        let percent = (done/l.items.length)*100;

        wrap.innerHTML+=`
        <div class="list-box">
            <div class="list-header">
                <h3>${l.title}</h3>
                <div class="actions">
                    <b>${done}/${l.items.length}</b>
                    <i class="fas fa-trash" onclick="openDelete(${li})"></i>
                </div>
            </div>
            <div class="progress">
                <div class="progress-bar" style="width:${percent}%"></div>
            </div>
            ${l.items.map((i,ii)=>`
            <div class="item">
                <div class="tick ${i.done?"done":""}" onclick="tick(${li},${ii})">
                    ${i.done?"‚úî":""}
                </div>
                <div class="name">${i.name}</div>
                <div class="time">${i.time||"Pending"}</div>
            </div>`).join("")}
        </div>
        `;

        if(done === l.items.length){
            setTimeout(()=>{
                l.items.forEach(it=>{it.done=false;it.time=null});
                save();render();
            },1000);
        }
    });
}

function tick(li,ii){
    let it = lists[li].items[ii];
    if(it.done) return;
    it.done=true;
    it.time=new Date().toLocaleString("en-IN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"});
    save();render();
}

function save(){
    localStorage.setItem("multiDuty",JSON.stringify(lists));
}

function openCreate(){
    createModal.style.display="flex";
}
function createList(){
    let t=listTitle.value.trim();
    let n=listNames.value.split(",").map(x=>x.trim()).filter(Boolean);
    if(!t||!n.length) return alert("Fill all fields");
    lists.push({title:t,items:n.map(x=>({name:x,done:false,time:null}))});
    save();render();
    createModal.style.display="none";
    listTitle.value="";listNames.value="";
}

function openDelete(i){
    deleteIndex=i;
    confirmText.value="";
    deleteModal.style.display="flex";
}

function confirmDelete(){
    if(confirmText.value !== "sab ki sahmati se delete hui hay"){
        alert("Confirmation text galat hai ‚ùå");
        return;
    }
    lists.splice(deleteIndex,1);
    save();render();
    deleteModal.style.display="none";
}
render();
</script>

</body>
</html>